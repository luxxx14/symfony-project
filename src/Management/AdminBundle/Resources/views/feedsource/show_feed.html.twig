{% extends 'admin.html.twig' %}

{% block body %}
    <h1>Модерация новостей</h1>

    <table class="table table-striped table-staff">
        <thead>
            <tr>
                <th>Заголовок</th>
                <th>Текст</th>
                <th>Автор</th>
                <th>Последнее обновление</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
        {% for entry in feed %}
            <tr>
                <td>{{ entry.title }}</td>
                <td>{{ entry.text }}</td>
                <td>{{ entry.author }}</td>
                <td>{% if entry.lastModified %}{{ entry.lastModified|date('Y-m-d H:i:s') }}{% endif %}</td>
                <td><nav><ul class="navbar">
                    <p><span style="padding: 0 10px; font-weight: bolder;">{{ entry.status }}</span></p>
                    <br>
                    {% if entry.status == 'На модерации' %}
                        <li>
                            <a class="btn" href="{{ path('admin_feed_change',
                            {id: entry.id, action: 'publish'}) }}">Опубликовать</a>
                        </li>
                        <br><br>
                        <li>
                            <a class="btn" href="{{ path('admin_feed_change',
                            {id: entry.id, action: 'reject'}) }}">Отклонить</a>
                        </li>
                    {% elseif entry.status == 'Опубликована' %}
                        <li>
                            <a class="btn" href="{{ path('admin_feed_change',
                            {id: entry.id, action: 'reject'}) }}">Отклонить</a>
                        </li>
                    {% elseif entry.status == 'Отклонена' %}
                        <li>
                            <a class="btn" href="{{ path('admin_feed_change',
                            {id: entry.id, action: 'publish'}) }}">Опубликовать</a>
                        </li>
                    {% endif %}
                </ul></nav></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
